<!DOCTYPE html>
<html lang="en"><head><meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><title>Network analysis · Mangal.jl</title><link href="https://cdnjs.cloudflare.com/ajax/libs/normalize/4.2.0/normalize.min.css" rel="stylesheet" type="text/css"/><link href="https://fonts.googleapis.com/css?family=Lato|Roboto+Mono" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.6.3/css/font-awesome.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/styles/default.min.css" rel="stylesheet" type="text/css"/><script>documenterBaseURL="../.."</script><script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.2.0/require.min.js" data-main="../../assets/documenter.js"></script><script src="../../siteinfo.js"></script><script src="../../../versions.js"></script><link href="../../assets/documenter.css" rel="stylesheet" type="text/css"/></head><body><nav class="toc"><a href="../../index.html"><img class="logo" src="../../assets/logo.png" alt="Mangal.jl logo"/></a><h1>Mangal.jl</h1><select id="version-selector" onChange="window.location.href=this.value" style="visibility: hidden"></select><form class="search" id="search-form" action="../../search/"><input id="search-query" name="q" type="text" placeholder="Search docs"/></form><ul><li><a class="toctext" href="../../">Mangal</a></li><li><span class="toctext">Vignettes</span><ul><li><a class="toctext" href="../introduction/">Introduction</a></li><li><a class="toctext" href="../counting/">Counting &amp; paging</a></li><li class="current"><a class="toctext" href>Network analysis</a><ul class="internal"><li><a class="toctext" href="#A-simple-example-1">A simple example</a></li><li><a class="toctext" href="#Sanity-check-1">Sanity check</a></li></ul></li></ul></li><li><span class="toctext">Package documentation</span><ul><li><a class="toctext" href="../../pkg/types/">Data types</a></li><li><a class="toctext" href="../../pkg/count/">Counting objects</a></li><li><a class="toctext" href="../../pkg/methods/">Methods for data retrieval</a></li><li><a class="toctext" href="../../pkg/ecologicalnetworks/">Networks retrieval</a></li><li><a class="toctext" href="../../pkg/internals/">Internal functions</a></li></ul></li></ul></nav><article id="docs"><header><nav><ul><li>Vignettes</li><li><a href>Network analysis</a></li></ul><a class="edit-page" href="https://github.com/PoisotLab/Mangal.jl/blob/master/docs/src/vignettes/ecologicalnetworks.md"><span class="fa"></span> Edit on GitHub</a></nav><hr/><div id="topbar"><span>Network analysis</span><a class="fa fa-bars" href="#"></a></div></header><h1><a class="nav-anchor" id="Integration-with-EcologicalNetworks.jl-1" href="#Integration-with-EcologicalNetworks.jl-1">Integration with <code>EcologicalNetworks.jl</code></a></h1><p>The <strong>Mangal</strong> package is integrated with <strong>EcologicalNetworks</strong> for analysis.</p><pre><code class="language-julia">using Mangal
using EcologicalNetworks</code></pre><h2><a class="nav-anchor" id="A-simple-example-1" href="#A-simple-example-1">A simple example</a></h2><p>In this simple example, we will look at a food web from 1956, retrieve it from the Mangal database, then convert it into a usable object:</p><pre><code class="language-julia">db_version = network(&quot;johnston_1956_19560101_947&quot;)</code></pre><pre><code class="language-none">MangalNetwork(947, true, &quot;johnston_1956_19560101_947&quot;, 1956-01-01T05:00:00,
 GeoInterface.Point([-122.363, 38.0037]), 2019-02-25T20:51:26, 2019-02-25T2
0:51:26, 3, &quot;Predation by short-eared owls on a salicornia salt marsh&quot;, fal
se, MangalDataset(14, true, &quot;johnston_1956&quot;, 1956-01-01T05:00:00, 2019-02-2
2T21:10:45, 2019-02-22T21:10:45, MangalReference(14, 1956, missing, missing
, missing, &quot;@article{Johnston_1956, ISSN = {00435643}, URL = {http://www.js
tor.org/stable/4158481}, abstract = {The Short-eared Owl is a common winter
 visitant to the salt marshes around San Francisco Bay. Between four and te
n owls live in the winter on the study plot of some 200 acres on San Pablo 
salt marsh. The owls forage mainly at night there. Of 638 items found in pe
llets, 75 per cent were mammals, 20 per cent birds, and 5 per cent insects.
 Mammals were responsible for about 90 per cent of the mass consumed, Micro
tus and Rattus being the most important kinds. The relationship of Short-ea
red Owl predation to the community food web is indicated by means of a diag
ram.}, author = {Richard F. Johnston}, journal = {The Wilson Bulletin}, num
ber = {2}, pages = {91--102}, publisher = {Wilson Ornithological Society}, 
title = {Predation by Short-Eared Owls on a Salicornia Salt Marsh}, volume 
= {68}, year = {1956}}&quot;, &quot;http://www.jstor.org/stable/4158481&quot;, &quot;https://gl
obalwebdb.com/&quot;), 3, &quot;Predation by short-eared owls on a salicornia salt ma
rsh&quot;))</code></pre><p>The conversion to the network is done using the <code>convert</code> method, which by default will return a <code>UnipartiteNetwork</code>, where species are the <code>MangalNode</code> of the original network:</p><pre><code class="language-julia">N = convert(UnipartiteNetwork, db_version)</code></pre><pre><code class="language-none">19×19 unipartite  ecological network (Bool, MangalNode) (L: 58)</code></pre><p>We can check that the type of the network is correct:</p><pre><code class="language-julia">eltype(N)</code></pre><pre><code class="language-none">(Bool, MangalNode)</code></pre><h2><a class="nav-anchor" id="Sanity-check-1" href="#Sanity-check-1">Sanity check</a></h2><pre><code class="language-julia">count(MangalInteraction, db_version) == links(N)</code></pre><pre><code class="language-none">true</code></pre><pre><code class="language-julia">count(MangalNode, db_version) == richness(N)</code></pre><pre><code class="language-none">true</code></pre><pre><code class="language-julia">species(N)</code></pre><pre><code class="language-none">19-element Array{MangalNode,1}:
 MangalNode(8470, &quot;Rattus&quot;, 2019-02-25T20:52:25, 2019-02-25T20:52:25, Manga
lReferenceTaxon(3810, &quot;Rattus&quot;, 3156, 135059, 10114, 12221616, missing, 201
9-02-22T14:05:53, 2019-02-22T14:05:53))                  
 MangalNode(8456, &quot;terrestrial invertebrates&quot;, 2019-02-25T20:52:25, 2019-02
-25T20:52:25, missing)                                                     
                                                         
 MangalNode(8473, &quot;terrestrial plants&quot;, 2019-02-25T20:52:25, 2019-02-25T20:
52:25, missing)                                                            
                                                         
 MangalNode(8457, &quot;intertidal invertebrates&quot;, 2019-02-25T20:52:25, 2019-02-
25T20:52:25, missing)                                                      
                                                         
 MangalNode(8474, &quot;marine plants&quot;, 2019-02-25T20:52:25, 2019-02-25T20:52:25
, missing)                                                                 
                                                         
 MangalNode(8459, &quot;fishes&quot;, 2019-02-25T20:52:25, 2019-02-25T20:52:25, missi
ng)                                                                        
                                                         
 MangalNode(8458, &quot;marine invertebrates&quot;, 2019-02-25T20:52:25, 2019-02-25T2
0:52:25, missing)                                                          
                                                         
 MangalNode(8461, &quot;herons&quot;, 2019-02-25T20:52:25, 2019-02-25T20:52:25, Manga
lReferenceTaxon(4346, &quot;Ardeidae&quot;, 1444, 174771, 8899, 11144384, missing, 20
19-02-23T16:25:14, 2019-02-23T16:25:14))                 
 MangalNode(8463, &quot;Anas&quot;, 2019-02-25T20:52:25, 2019-02-25T20:52:25, MangalR
eferenceTaxon(3803, &quot;Anas&quot;, 3235, 5914, 8835, 10254288, missing, 2019-02-22
T14:05:52, 2019-02-22T14:05:52))                         
 MangalNode(8462, &quot;Rallus&quot;, 2019-02-25T20:52:25, 2019-02-25T20:52:25, Manga
lReferenceTaxon(3802, &quot;Rallus&quot;, 3288, 113088, 54360, 5730650, missing, 2019
-02-22T14:05:52, 2019-02-22T14:05:52))                   
 MangalNode(8465, &quot;waterfowl&quot;, 2019-02-25T20:52:25, 2019-02-25T20:52:25, Ma
ngalReferenceTaxon(3805, &quot;Waterfowl&quot;, missing, 174982, 8830, missing, missi
ng, 2019-02-22T14:05:52, 2019-02-22T14:05:52))           
 MangalNode(8464, &quot;migrant shorebirds&quot;, 2019-02-25T20:52:25, 2019-02-25T20:
52:25, missing)                                                            
                                                         
 MangalNode(8466, &quot;passerines&quot;, 2019-02-25T20:52:25, 2019-02-25T20:52:25, M
angalReferenceTaxon(4985, &quot;Passeriformes&quot;, 321, 178265, 9126, 11144180, mis
sing, 2019-02-25T20:51:32, 2019-02-25T20:51:32))         
 MangalNode(8468, &quot;Reithrodontomys&quot;, 2019-02-25T20:52:25, 2019-02-25T20:52:
25, MangalReferenceTaxon(3808, &quot;Reithrodontomys&quot;, 73424, 180344, 44233, 731
2617, missing, 2019-02-22T14:05:53, 2019-02-22T14:05:53))
 MangalNode(8467, &quot;Microtus&quot;, 2019-02-25T20:52:25, 2019-02-25T20:52:25, Man
galReferenceTaxon(3807, &quot;Microtus&quot;, 6899, 180300, 10053, 7245360, missing, 
2019-02-22T14:05:52, 2019-02-22T14:05:52))               
 MangalNode(8469, &quot;Mus&quot;, 2019-02-25T20:52:25, 2019-02-25T20:52:25, MangalRe
ferenceTaxon(3809, &quot;Mus&quot;, 6916, 856, 10088, 12091880, missing, 2019-02-22T1
4:05:53, 2019-02-22T14:05:53))                           
 MangalNode(8472, &quot;Asio&quot;, 2019-02-25T20:52:25, 2019-02-25T20:52:25, MangalR
eferenceTaxon(3812, &quot;Asio&quot;, 4888, 6396, 56266, 10197460, missing, 2019-02-2
2T14:05:53, 2019-02-22T14:05:53))                        
 MangalNode(8460, &quot;Sorex&quot;, 2019-02-25T20:52:25, 2019-02-25T20:52:25, Mangal
ReferenceTaxon(3800, &quot;Sorex&quot;, 3032, 179928, 9379, 6984339, missing, 2019-02
-22T14:05:52, 2019-02-22T14:05:52))                      
 MangalNode(8471, &quot;Circus&quot;, 2019-02-25T20:52:25, 2019-02-25T20:52:25, Manga
lReferenceTaxon(3811, &quot;Circus&quot;, 4452, 175433, 8963, 11145902, missing, 2019
-02-22T14:05:53, 2019-02-22T14:05:53))</code></pre><pre><code class="language-julia">[s.taxon for s in species(N)]</code></pre><pre><code class="language-none">19-element Array{Union{Missing, MangalReferenceTaxon},1}:
 MangalReferenceTaxon(3810, &quot;Rattus&quot;, 3156, 135059, 10114, 12221616, missin
g, 2019-02-22T14:05:53, 2019-02-22T14:05:53)         
 missing                                                                   
                                                     
 missing                                                                   
                                                     
 missing                                                                   
                                                     
 missing                                                                   
                                                     
 missing                                                                   
                                                     
 missing                                                                   
                                                     
 MangalReferenceTaxon(4346, &quot;Ardeidae&quot;, 1444, 174771, 8899, 11144384, missi
ng, 2019-02-23T16:25:14, 2019-02-23T16:25:14)        
 MangalReferenceTaxon(3803, &quot;Anas&quot;, 3235, 5914, 8835, 10254288, missing, 20
19-02-22T14:05:52, 2019-02-22T14:05:52)              
 MangalReferenceTaxon(3802, &quot;Rallus&quot;, 3288, 113088, 54360, 5730650, missing
, 2019-02-22T14:05:52, 2019-02-22T14:05:52)          
 MangalReferenceTaxon(3805, &quot;Waterfowl&quot;, missing, 174982, 8830, missing, mi
ssing, 2019-02-22T14:05:52, 2019-02-22T14:05:52)     
 missing                                                                   
                                                     
 MangalReferenceTaxon(4985, &quot;Passeriformes&quot;, 321, 178265, 9126, 11144180, m
issing, 2019-02-25T20:51:32, 2019-02-25T20:51:32)    
 MangalReferenceTaxon(3808, &quot;Reithrodontomys&quot;, 73424, 180344, 44233, 731261
7, missing, 2019-02-22T14:05:53, 2019-02-22T14:05:53)
 MangalReferenceTaxon(3807, &quot;Microtus&quot;, 6899, 180300, 10053, 7245360, missi
ng, 2019-02-22T14:05:52, 2019-02-22T14:05:52)        
 MangalReferenceTaxon(3809, &quot;Mus&quot;, 6916, 856, 10088, 12091880, missing, 201
9-02-22T14:05:53, 2019-02-22T14:05:53)               
 MangalReferenceTaxon(3812, &quot;Asio&quot;, 4888, 6396, 56266, 10197460, missing, 2
019-02-22T14:05:53, 2019-02-22T14:05:53)             
 MangalReferenceTaxon(3800, &quot;Sorex&quot;, 3032, 179928, 9379, 6984339, missing, 
2019-02-22T14:05:52, 2019-02-22T14:05:52)            
 MangalReferenceTaxon(3811, &quot;Circus&quot;, 4452, 175433, 8963, 11145902, missing
, 2019-02-22T14:05:53, 2019-02-22T14:05:53)</code></pre><footer><hr/><a class="previous" href="../counting/"><span class="direction">Previous</span><span class="title">Counting &amp; paging</span></a><a class="next" href="../../pkg/types/"><span class="direction">Next</span><span class="title">Data types</span></a></footer></article></body></html>
